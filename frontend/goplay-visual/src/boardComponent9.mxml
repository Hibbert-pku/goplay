<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="600" height="600" creationComplete="create_Stones()">
	<fx:Script>
		<![CDATA[
			import flashx.textLayout.tlf_internal;
			
			import mx.controls.Alert;
			
			public var color_player:String =  "@Embed(source = 'artwork/board9x9.jpg')";
			public var color_black19:String =  "{black_source.source}";
			public var color_white19:String = "{white_source.source}";
			
			public var game_id:int;
			public var chat_id:int;
			public var black:String;
			public var white:String;
			public var size:int;
			public var komi:Number;
			public var handicap:int;
			public var timed_game:Boolean;
			public var main_time:int;
			public var byo_yomi:Number;
			public var moves_handicap:Array;
			public var moves_all:Array;
			public var resigned:String;
			public var score:String;
			
			public static var games:Dictionary = new Dictionary();
			
			public function init(game_id:int, chat_id:int,
								 black:String, white:String, size:int, komi:Number, handicap:int,
								 timed_game:Boolean, main_time:int, byo_yomi:Number,
								 moves_handicap:Array, moves_all:Array, resigned:String, score:String):void
			{
				games[game_id] = this;

				this.game_id = game_id;
				this.chat_id = game_id;
				this.black = black;
				this.white = white;
				this.size = size;
				this.komi = komi;
				this.handicap = handicap;
				this.timed_game = timed_game;
				this.main_time = main_time;
				this.byo_yomi = byo_yomi;
				this.moves_handicap = moves_handicap;
				this.moves_all = moves_all;
				this.resigned = resigned;
				this.score = score;
				
				//ClientProtocol.setCommandHandler('game.play', ...);
				//ClientProtocol.setCommandHandler('game.final_score', ...);
			}
			
			public function create_Stones():void{
				var stones_array:Array = new Array();
				var pos_x:int = 32;
				var pos_y:int = 32;
				var i:int = 0;
				for(i=0; i<9; i++){
					stones_array.push(row_array);
					var row_array:Array = new Array();
					for(var j:int = 0; j<9; j++){ 
						var image:Image = new Image();
						image.source = black_source.source;
						image.id = j + ","+i;
						image.x = pos_x+j*51;
						image.y = pos_y+i*51;
						
						function handler():void {
							var x:int = j;
							var y:int = i;
							Alert.show(x+ ","+y);
						}
						
						image.addEventListener(MouseEvent.CLICK,handler);
						row_array.push(image);
						addElement(image);
					}
					
				}
			}
			
			protected function stone_clickHandler(event:MouseEvent):void{
				
			}		
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<mx:Image x="10" y="10" id="board" source="@Embed(source = 'artwork/board9x9.jpg')"/>
	
						<!--Embeded stone image sources-->
	<mx:Image x="540" y="192" id="white_source" source="@Embed(source='artwork/white_stone9.png')" width="50" height="50"/>
	<mx:Image x="540" y="134" id="black_source" source="@Embed(source='artwork/black_stone9.png')" width="50" height="50"/>
	
						<!--Control Buttons-->
	<s:Button x="526" y="36" label="Pass" id="pass_btn"/>
	<s:Button x="526" y="66" label="Resign" id="resign_btn"/>
	<s:Button x="526" y="492" label="Close" id="close_btn"/>
</s:Group>
